<!doctype html>
<html>
     <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <!--<meta http-equiv="refresh" content="600"> <!-- Refresh every 30 seconds, no JS needed! -->

          <!-- Cheeky little nosy thing, aren't ya? -->
     <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
     <link href="index.css" rel="stylesheet" type="text/css" </link> <script type="text/javascript" src="js/index.js"></script>
     <script src="js/jquery-3.4.1.min.js"></script> <!-- jQuery, dependency of DataTables -->
     <script src="js/papaparse.min.js"></script> <!-- PapaParse (for CSV parsing) -->
     <link rel="icon" type="image/x-icon" href="https://bfarm.com/ca-agriculture/favicon.ico">
     <title>Bowles Farming Group 13</title>
</head>

<body>
     <iframe
          width="100%"
          height="520"
          frameborder="0"
          src="https://aleckwiat.carto.com/builder/2a4adb6e-ec28-4c0d-aa09-c8aaf308bdb4/embed"
          allowfullscreen="allowfullscreen"
          webkitallowfullscreen="webkitallowfullscreen"
          mozallowfullscreen="mozallowfullscreen"
          oallowfullscreen="oallowfullscreen"
          msallowfullscreen="msallowfullscreen">
      </iframe>

     <h1>Task List</h1>
     <script type="text/javascript">
          var tableName = "tab1";
          var csv_rows = new Array(); //no size arg means it's a dynamically sized array
          // this array will hold arrays from the rows of the CSV files (basically array of arrays lol)

          var counter = 0; //used for location to place new row in csv_rows array

          Papa.parse("things.csv", {
               download: true,
               step: function (row) {
                    //console.log("Row:", row.data);
                    csv_rows[counter] = row.data[0]; //[0] because there's other pieces of metadata that PapaParse has as well (data[0] is the array itself)
                    counter = counter + 1; //increment counter so that for placement of next row of items
               },
               complete: function () { //must do the rest of the functions here because this is asynchronous (the things outside of this function will complete most likely complete before this completes)
                    console.log("All done parsing CSV file!");
                    console.log(
                         "We now have a " + csv_rows.length + " x " + csv_rows[0].length + " array (yes, this includes the first row [aka column names] of the CSV and, for some odd reason, an extra blank line at the end of the CSV (dw, I've offset values to account for these))"
                    );
                    tableCreation(tableName, csv_rows.length); //create table with class name tab1 with the rows and columns (empty)
                    populateTable(tableName, csv_rows); //adds text to the rows of the table
                    addColorToTaskStatus(tableName); //adds color to task status portion of table
               }
          });
     </script>
</body>



</html>
